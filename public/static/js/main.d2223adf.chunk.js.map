{"version":3,"sources":["shared/HeaderNav.js","shared/header.jpg","shared/Header.js","shared/ErrorAlert.js","utils/api.js","home/MoviesList.js","movie/AverageRating.js","movies/DetailedMovie.js","movies/DetailedMoviesList.js","movie/Details.js","movie/Review.js","movie/ReviewList.js","movie/Theater.js","movie/TheaterList.js","movie/FullMovie.js","theaters/Theater.js","theaters/TheaterList.js","App.js","index.js"],"names":["HeaderNav","className","style","padding","to","fontStyle","Header","background","headerImage","backgroundPosition","backgroundSize","ErrorAlert","error","message","API_BASE_URL","headers","Headers","fetchJson","url","options","onCancel","a","fetch","response","status","json","payload","Promise","reject","data","name","console","stack","resolve","populateReviews","signal","movie","movie_id","reviews","populateTheaters","theaters","listMovies","URL","addReviews","then","movies","all","map","movieId","addTheaters","reviewId","method","body","JSON","stringify","append","MoviesList","useState","setMovies","setError","useEffect","abortController","AbortController","catch","abort","list","alt","title","src","image_url","width","averageReviewRating","length","total","reduce","sum","review","score","Math","round","AverageRating","DetailedMovie","description","runtime","rating","DetailedMoviesList","Details","runtime_in_minutes","scoreButtonStyle","Review","deleteReview","setReviewScore","critic","preferred_name","surname","organization_name","dangerouslySetInnerHTML","__html","markdown","toHTML","content","onClick","handleIncreaseClick","handleDecreaseClick","ReviewList","sort","leftReview","rightReview","localeCompare","review_id","Theater","theater","address_line_1","address_line_2","city","state","zip","TheaterList","theater_id","FullMovie","useParams","setMovie","loadMovie","readMovie","log","updateReview","setTheaters","listTheaters","App","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d2223adf.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction HeaderNav() {\r\n  const style = {\r\n    padding: \"1rem 0 3rem\",\r\n  };\r\n\r\n  const italic = {\r\n    fontStyle: \"italic\",\r\n  };\r\n\r\n  return (\r\n    <ul className=\"nav justify-content-start\" style={style}>\r\n      <li className=\"nav-item d-none d-lg-block d-xl-block\">\r\n        <Link className=\"font-poppins-heading nav-link mx-2 text-light\" to=\"/\">\r\n          <h1 className=\"h5\" style={italic}>\r\n            WeLoveMovies\r\n          </h1>\r\n        </Link>\r\n      </li>\r\n      <li className=\"nav-item\">\r\n        <Link\r\n          className=\"nav-link mx-2 font-weight-light text-light\"\r\n          to=\"/movies\"\r\n        >\r\n          All Movies\r\n        </Link>\r\n      </li>\r\n      <li className=\"nav-item\">\r\n        <Link\r\n          className=\"nav-link mx-2 font-weight-light text-light\"\r\n          to=\"/theaters\"\r\n        >\r\n          All Theaters\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default HeaderNav;\r\n","export default __webpack_public_path__ + \"static/media/header.c47d8fe5.jpg\";","import React from \"react\";\r\nimport HeaderNav from \"./HeaderNav\";\r\nimport headerImage from \"./header.jpg\";\r\n\r\nfunction Header() {\r\n  const style = {\r\n    background: `linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.7)), url(${headerImage})`,\r\n    backgroundPosition: \"center\",\r\n    backgroundSize: \"100% auto\",\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"jumbotron jumbotron-fluid text-white border-bottom border-dark pt-0\"\r\n      style={style}\r\n    >\r\n      <HeaderNav />\r\n      <div className=\"container\">\r\n        <h1 className=\"display-4\">Find your next favorite movie!</h1>\r\n        <p className=\"lead\">\r\n          <em>WeLoveMovies</em> is your source for finding reviews of movies in\r\n          theatres near you.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\n\r\n/**\r\n * Displays a bootstrap danger alert if the specified error is truthy.\r\n * @param error\r\n *  an instance of an object with `.message` property as a string, typically an Error instance.\r\n * @returns {JSX.Element}\r\n *  a bootstrap danger alert that contains the message string.\r\n */\r\nfunction ErrorAlert({ error }) {\r\n  return (\r\n    error && (\r\n      <div className=\"alert alert-danger m-2\">Error: {error.message}</div>\r\n    )\r\n  );\r\n}\r\n\r\nexport default ErrorAlert;\r\n","const API_BASE_URL =\r\n  // process.env.REACT_APP_API_BASE_URL ||\r\n  'https://frozen-temple-19090.herokuapp.com/';\r\n\r\n/**\r\n * Defines the default headers for these functions to work with `json-server`\r\n */\r\nconst headers = new Headers();\r\nheaders.append(\"Content-Type\", \"application/json\");\r\n\r\n/**\r\n * Fetch `json` from the specified URL and handle error status codes and ignore `AbortError`s\r\n *\r\n * This function is NOT exported because it is not needed outside of this file.\r\n *\r\n * @param url\r\n *  the url for the requst.\r\n * @param options\r\n *  any options for fetch\r\n * @param onCancel\r\n *  value to return if fetch call is aborted. Default value is undefined.\r\n * @returns {Promise<Error|any>}\r\n *  a promise that resolves to the `json` data or an error.\r\n *  If the response is not in the 200 - 399 range the promise is rejected.\r\n */\r\nasync function fetchJson(url, options, onCancel) {\r\n  try {\r\n    const response = await fetch(url, options);\r\n\r\n    if (response.status === 204) {\r\n      return null;\r\n    }\r\n\r\n    const payload = await response.json();\r\n\r\n    if (payload.error) {\r\n      return Promise.reject({ message: payload.error });\r\n    }\r\n    return payload.data;\r\n  } catch (error) {\r\n    if (error.name !== \"AbortError\") {\r\n      console.error(error.stack);\r\n      throw error;\r\n    }\r\n    return Promise.resolve(onCancel);\r\n  }\r\n}\r\n\r\nfunction populateReviews(signal) {\r\n  return async (movie) => {\r\n    const url = `${API_BASE_URL}/movies/${movie.movie_id}/reviews`;\r\n    movie.reviews = await fetchJson(url, { headers, signal }, []);\r\n    return movie;\r\n  };\r\n}\r\n\r\nfunction populateTheaters(signal) {\r\n  return async (movie) => {\r\n    const url = `${API_BASE_URL}/movies/${movie.movie_id}/theaters`;\r\n    movie.theaters = await fetchJson(url, { headers, signal }, []);\r\n    return movie;\r\n  };\r\n}\r\n\r\n/**\r\n * Retrieves all existing movies and populates the `reviews` property\r\n * @returns {Promise<[movie]>}\r\n *  a promise that resolves to a possibly empty array of movies saved in the database.\r\n */\r\nexport async function listMovies(signal) {\r\n  const url = new URL(`${API_BASE_URL}/movies?is_showing=true`);\r\n  const addReviews = populateReviews(signal);\r\n  return await fetchJson(url, { headers, signal }, []).then((movies) =>\r\n    Promise.all(movies.map(addReviews))\r\n  );\r\n}\r\n\r\n/**\r\n * Retrieves all existing theaters\r\n * @returns {Promise<[theater]>}\r\n *  a promise that resolves to a possibly empty array of theaters saved in the database.\r\n */\r\nexport async function listTheaters(signal) {\r\n  const url = new URL(`${API_BASE_URL}/theaters`);\r\n  return await fetchJson(url, { headers, signal }, []);\r\n}\r\n\r\n/**\r\n * Retrieves all existing movies and populates the `reviews` property\r\n * @returns {Promise<[movie]>}\r\n *  a promise that resolves to a possibly empty array of movies saved in the database.\r\n */\r\nexport async function readMovie(movieId, signal) {\r\n  const url = new URL(`${API_BASE_URL}/movies/${movieId}`);\r\n  const addReviews = populateReviews(signal);\r\n  const addTheaters = populateTheaters(signal);\r\n  return await fetchJson(url, { headers, signal }, [])\r\n    .then(addReviews)\r\n    .then(addTheaters);\r\n}\r\n\r\nexport async function deleteReview(reviewId) {\r\n  const url = `${API_BASE_URL}/reviews/${reviewId}`;\r\n  return await fetchJson(url, { method: \"DELETE\", headers }, {});\r\n}\r\n\r\nexport async function updateReview(reviewId, data) {\r\n  const url = `${API_BASE_URL}/reviews/${reviewId}`;\r\n  const options = {\r\n    method: \"PUT\",\r\n    headers,\r\n    body: JSON.stringify({ data }),\r\n  };\r\n  return await fetchJson(url, options, {});\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ErrorAlert from \"../shared/ErrorAlert\";\r\nimport { listMovies } from \"../utils/api\";\r\n\r\nfunction MoviesList() {\r\n  const [movies, setMovies] = useState([]);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setError(null);\r\n    const abortController = new AbortController();\r\n    listMovies(abortController.signal).then(setMovies).catch(setError);\r\n\r\n    return () => abortController.abort();\r\n  }, []);\r\n\r\n  const list = movies.map((movie) => (\r\n    <article key={movie.movie_id} className=\"col-sm-12 col-md-6 col-lg-3 my-2\">\r\n      <img\r\n        alt={`${movie.title} Poster`}\r\n        className=\"rounded\"\r\n        src={movie.image_url}\r\n        style={{ width: \"100%\" }}\r\n      />\r\n      <Link\r\n        to={`/movies/${movie.movie_id}`}\r\n        className=\"stretched-link text-dark\"\r\n      >\r\n        <h3 className=\"font-poppins-heading text-center mt-2\">{movie.title}</h3>\r\n      </Link>\r\n    </article>\r\n  ));\r\n\r\n  return (\r\n    <main className=\"container\">\r\n      <ErrorAlert error={error} />\r\n      <h2 className=\"font-poppins\">Now Showing</h2>\r\n      <hr />\r\n      <section className=\"row\">{list}</section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default MoviesList;\r\n","import React from \"react\";\r\n\r\nfunction averageReviewRating(reviews = []) {\r\n  if (reviews.length) {\r\n    const total = reviews.reduce((sum, review) => sum + review.score, 0);\r\n    return Math.round(total / reviews.length);\r\n  }\r\n  return \"N/A\";\r\n}\r\n\r\nfunction AverageRating({ reviews = [] }) {\r\n  return (\r\n    <p>\r\n      <strong>Average Review Rating:</strong> {averageReviewRating(reviews)}\r\n    </p>\r\n  );\r\n}\r\n\r\nexport default AverageRating;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AverageRating from \"../movie/AverageRating\";\r\n\r\nfunction DetailedMovie({ movie }) {\r\n  return (\r\n    <section className=\"row mt-4\">\r\n      <article className=\"col-sm-12 col-md-6 col-lg-3\">\r\n        <img\r\n          alt={`${movie.title} Poster`}\r\n          className=\"rounded\"\r\n          src={movie.image_url}\r\n          style={{ width: \"100%\" }}\r\n        />\r\n      </article>\r\n      <aside className=\"col-sm-12 col-md-6 col-lg-9\">\r\n        <h3 className=\"font-poppins-heading mb-4\">{movie.title}</h3>\r\n        <p>{movie.description}</p>\r\n        <p>\r\n          <strong>Runtime:</strong> {movie.runtime} minutes\r\n        </p>\r\n        <p>\r\n          <strong>Rating:</strong> {movie.rating}\r\n        </p>\r\n        <AverageRating reviews={movie.reviews} />\r\n        <Link to={`/movies/${movie.movie_id}`} className=\"btn btn-primary\">\r\n          See More\r\n        </Link>\r\n      </aside>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default DetailedMovie;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport DetailedMovie from \"./DetailedMovie\";\r\nimport ErrorAlert from \"../shared/ErrorAlert\";\r\nimport { listMovies } from \"../utils/api\";\r\n\r\nfunction DetailedMoviesList() {\r\n  const [movies, setMovies] = useState([]);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setError(null);\r\n    const abortController = new AbortController();\r\n    listMovies(abortController.signal).then(setMovies).catch(setError);\r\n\r\n    return () => abortController.abort();\r\n  }, []);\r\n\r\n  const list = movies.map((movie) => (\r\n    <DetailedMovie key={movie.movie_id} movie={movie} />\r\n  ));\r\n\r\n  return (\r\n    <main className=\"container\">\r\n      <ErrorAlert error={error} />\r\n      <h2 className=\"font-poppins\">All Movies</h2>\r\n      <hr />\r\n      <section>{list}</section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default DetailedMoviesList;\r\n","import React from \"react\";\r\nimport AverageRating from \"./AverageRating\";\r\n\r\nfunction Details({ movie }) {\r\n  return (\r\n    <section>\r\n      <h3 className=\"font-poppins-heading mb-4\">{movie.title}</h3>\r\n      <p>{movie.description}</p>\r\n      <p>\r\n        <strong>Runtime:</strong> {movie.runtime_in_minutes} minutes\r\n      </p>\r\n      <p>\r\n        <strong>Rating:</strong> {movie.rating}\r\n      </p>\r\n      <AverageRating reviews={movie.reviews} />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Details;\r\n","import React from \"react\";\r\nimport { markdown } from \"markdown\";\r\n\r\nconst scoreButtonStyle = {\r\n  padding: \"0 0px 5px 5px\",\r\n};\r\n\r\nfunction Review({ review, deleteReview, setReviewScore }) {\r\n  const handleIncreaseClick = () => {\r\n    const score = review.score + 1;\r\n    if (score > 5) return;\r\n    setReviewScore(review, score);\r\n  };\r\n\r\n  const handleDecreaseClick = () => {\r\n    const score = review.score - 1;\r\n    if (score < 1) return;\r\n    setReviewScore(review, score);\r\n  };\r\n\r\n  const { critic } = review;\r\n\r\n  return (\r\n    <section className=\"border p-4 mb-4\">\r\n      <h4>\r\n        {critic.preferred_name} {critic.surname}\r\n        <small> of {critic.organization_name}</small>\r\n      </h4>\r\n      <p\r\n        dangerouslySetInnerHTML={{ __html: markdown.toHTML(review.content) }}\r\n      />\r\n      <p>\r\n        <strong>Rating:</strong> {review.score}\r\n        <button\r\n          className=\"btn btn-link\"\r\n          style={scoreButtonStyle}\r\n          onClick={() => handleIncreaseClick()}\r\n        >\r\n          ↑\r\n        </button>\r\n        <button\r\n          className=\"btn btn-link\"\r\n          style={scoreButtonStyle}\r\n          onClick={() => handleDecreaseClick()}\r\n        >\r\n          ↓\r\n        </button>\r\n      </p>\r\n\r\n      <button className=\"btn btn-danger\" onClick={() => deleteReview(review)}>\r\n        Destroy Review\r\n      </button>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Review;\r\n","import React from \"react\";\r\nimport Review from \"./Review\";\r\n\r\nfunction ReviewList({ reviews = [], deleteReview, setReviewScore }) {\r\n  if (reviews.length) {\r\n    const list = reviews\r\n      .sort((leftReview, rightReview) => {\r\n        return leftReview.critic.preferred_name.localeCompare(\r\n          rightReview.critic.preferred_name\r\n        );\r\n      })\r\n      .map((review) => (\r\n        <Review\r\n          key={review.review_id}\r\n          review={review}\r\n          deleteReview={deleteReview}\r\n          setReviewScore={setReviewScore}\r\n        />\r\n      ));\r\n\r\n    return (\r\n      <section className=\"mt-4\">\r\n        <h3>Reviews</h3>\r\n        {list}\r\n      </section>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default ReviewList;\r\n","import React from \"react\";\r\n\r\nfunction Theater({ theater }) {\r\n  return (\r\n    <article className=\"col-sm-12 col-md\">\r\n      <div className=\"card\">\r\n        <div className=\"card-body\">\r\n          <h5>{theater.name}</h5>\r\n          <address>\r\n            {theater.address_line_1}\r\n            <br />\r\n            {theater.address_line_2 ? theater.address_line_2 : null}\r\n            {theater.city}, {theater.state} {theater.zip}\r\n          </address>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default Theater;\r\n","import React from \"react\";\r\nimport Theater from \"./Theater\";\r\n\r\nfunction TheaterList({ theaters = [] }) {\r\n  if (theaters.length) {\r\n    return (\r\n      <section className=\"mt-4\">\r\n        <h4>Now Showing Here</h4>\r\n        <div className=\"row\">\r\n          {theaters.map((theater) => (\r\n            <Theater key={theater.theater_id} theater={theater} />\r\n          ))}\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default TheaterList;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Details from \"./Details\";\r\nimport ReviewList from \"./ReviewList\";\r\nimport TheaterList from \"./TheaterList\";\r\nimport { deleteReview, readMovie, updateReview } from \"../utils/api\";\r\nimport ErrorAlert from \"../shared/ErrorAlert\";\r\n\r\nfunction FullMovie() {\r\n  const { movieId } = useParams();\r\n  const [movie, setMovie] = useState({});\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    loadMovie(movieId);\r\n  }, [movieId]);\r\n\r\n  function loadMovie(movieId) {\r\n    setError(null);\r\n    const abortController = new AbortController();\r\n    readMovie(movieId, abortController.signal).then(setMovie).catch(setError);\r\n    return () => abortController.abort();\r\n  }\r\n\r\n  function deleteReviewHandler({ movie_id: movieId, review_id: reviewId }) {\r\n    deleteReview(reviewId).then(() => loadMovie(movieId));\r\n  }\r\n\r\n  function updateScoreHandler(\r\n    { movie_id: movieId, review_id: reviewId },\r\n    score\r\n  ) {\r\n    console.log(\"score\", reviewId, score);\r\n    updateReview(reviewId, { score }).then(() => loadMovie(movieId));\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <ErrorAlert error={error} />\r\n      <section className=\"row mt-4\">\r\n        <article className=\"col-sm-12 col-md-6 col-lg-3\">\r\n          <img\r\n            alt={`${movie.title} Poster`}\r\n            className=\"rounded\"\r\n            src={movie.image_url}\r\n            style={{ width: \"100%\" }}\r\n          />\r\n        </article>\r\n        <aside className=\"col-sm-12 col-md-6 col-lg-9\">\r\n          <Details movie={movie} />\r\n          <TheaterList theaters={movie.theaters} />\r\n          <ReviewList\r\n            reviews={movie.reviews}\r\n            deleteReview={deleteReviewHandler}\r\n            setReviewScore={updateScoreHandler}\r\n          />\r\n        </aside>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FullMovie;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Theater({ theater }) {\r\n  return (\r\n    <article className=\"col-12 mb-4\">\r\n      <div className=\"row\">\r\n        <aside className=\"col\">\r\n          <h2>{theater.name}</h2>\r\n          <address>\r\n            {theater.address_line_1}\r\n            <br />\r\n            {theater.address_line_2 ? theater.address_line_2 : null}\r\n            {theater.city}, {theater.state} {theater.zip}\r\n          </address>\r\n        </aside>\r\n        <section className=\"col\">\r\n          <div className=\"row\">\r\n            {theater.movies.map((movie) => (\r\n              <div key={movie.movie_id} className=\"col-2\">\r\n                <Link to={`/movies/${movie.movie_id}`}>\r\n                  <img\r\n                    alt={`${movie.title} Poster`}\r\n                    src={movie.image_url}\r\n                    className=\"w-100\"\r\n                  />\r\n                </Link>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default Theater;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Theater from \"./Theater\";\r\nimport ErrorAlert from \"../shared/ErrorAlert\";\r\nimport { listTheaters } from \"../utils/api\";\r\n\r\nfunction TheaterList() {\r\n  const [theaters, setTheaters] = useState([]);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setError(null);\r\n    const abortController = new AbortController();\r\n    listTheaters(abortController.signal).then(setTheaters).catch(setError);\r\n    return () => abortController.abort();\r\n  }, []);\r\n\r\n  const list = theaters.map((theater) => (\r\n    <Theater key={theater.theater_id} theater={theater} />\r\n  ));\r\n\r\n  return (\r\n    <main className=\"container\">\r\n      <ErrorAlert error={error} />\r\n      <h2 className=\"font-poppins\">All Theaters</h2>\r\n      <hr />\r\n      <section className=\"row\">{list}</section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default TheaterList;\r\n","import Header from \"./shared/Header\";\r\nimport MoviesList from \"./home/MoviesList\";\r\nimport DetailedMoviesList from \"./movies/DetailedMoviesList\";\r\nimport FullMovie from \"./movie/FullMovie\";\r\nimport TheaterList from \"./theaters/TheaterList\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <Header />\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n          <MoviesList />\r\n        </Route>\r\n        <Route exact path=\"/movies\">\r\n          <DetailedMoviesList />\r\n        </Route>\r\n        <Route exact path=\"/movies/:movieId\">\r\n          <FullMovie />\r\n        </Route>\r\n        <Route exact path=\"/theaters\">\r\n          <TheaterList />\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}